<div class="wrapper">
    <div class="commands-wrapper">
        <a mat-raised-button class="command-button" routerLink="/sales/create">Create</a>
        <button *ngIf="canDelete()" class="command-button" mat-raised-button (click)="deleteSelectedSale()">Delete</button>
    </div>

    <div class="table-wrapper">
        <mat-form-field>
            <input matInput placeholder="Search users" #input>
        </mat-form-field>
        
        <mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <!-- Selection Column -->
            <ng-container matColumnDef="select">
                <mat-header-cell *matHeaderCellDef></mat-header-cell>
                <mat-cell *matCellDef="let row">
                    <mat-checkbox (click)="$event.stopPropagation()"
                                (change)="$event ? selection.toggle(row) : null"
                                [checked]="selection.isSelected(row)">
                    </mat-checkbox>
                </mat-cell>
            </ng-container>

            <!-- Region Column -->
            <ng-container matColumnDef="region">
                <mat-header-cell *matHeaderCellDef> Region </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <editable-table-cell fieldName="region" title="Region" [value]="element.region" [canEdit]="canEdit()" (update)="update($event, element)"></editable-table-cell>
                </mat-cell>
            </ng-container>
    
            <!-- Country Column-->
            <ng-container matColumnDef="country">
                <mat-header-cell *matHeaderCellDef> Country </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <editable-table-cell fieldName="country" title="Country" [value]="element.country" [canEdit]="canEdit()" (update)="update($event, element)"></editable-table-cell>
                </mat-cell>
            </ng-container>
    
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>

        <div class="loading-wrapper" *ngIf="dataSource.loading$ | async">
            <mat-spinner></mat-spinner>
        </div>

        <mat-paginator [length]="count" [pageSize]="defaultPageSize"
                   [pageSizeOptions]="[3, 10, 25, 50]"></mat-paginator>
    </div>
</div>